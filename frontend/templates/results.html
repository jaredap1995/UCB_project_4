<!DOCTYPE html>
<html lang = 'en'>
    <meta charset = 'UTF-8'>
    <meta http-equiv = 'X-UA-Compatible' content = 'IE=edge'>
    <meta name = 'viewport' content = 'width=device-width, initial-scale=1.0'>
    <title> Search Results </title>
    <!-- Bootstrap CSS -->
    <link rel = 'stylesheet' href = 'https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css'>
    <link rel = 'stylesheet' href = "{{ url_for ('static', filename = 'css/results.css') }}">
<body>
    {% extends "nav.html" %}
    {% block content %}
    <div class = 'container'>
        <div class = 'row'>
            <div class = 'col-md-8'>
                <h1> Search Results </h1>
                <!-- Jinja 2 For loop-->
                {% for result in results[:10] %}
                <!-- Row Template for Search Results -->
                <div class = 'row mb-2'>
                    <div class = 'col-md-6'>
                        <img src = "{{ url_for('static', filename = 'results/' + result.image)}}" class = 'img-fluid' alt = 'Result'>
                    </div>
                    <div class = "col-md-5">
                        <h3> {{ result.manufacturer }} {{ result.model }}</h3>
                        <p> <strong> Year: </strong> {{ result.year }} </p>
                        <p> {{result.odometer}} </p>
                        <p> {{ result.transmission }} </p>
                        <p> {{result.condition}} </p>
                        <!-- We can try and add a column in the database that has a url reference for that car, nothing crazy, just a link to the brand or somehting-->
                        <p> <a href = "https://www.carmax.com/cars?search={{result.manufacturer}}+{{result.model}}"> Shop for this car</a></p> 
                        <a href = "{{url_for('car_details', car_id = result.id )}}"> Estimated Price Range {{result.price_range}}</a>
                    </div>
                </div>
            <!-- End of Row Template for Search Results-->
            {% endfor %}
            </div>
            <div class = 'col-md-4'>
                <h3> Other cars we think you may like</h3>
                {% for result in reccomendations[:3] %} <!-- Limit reccomendations to 3-->
                <!-- Row Template for Search Results -->
                <div class = 'row mb-2'>
                    <div class = 'col-md-5'>
                        <img src = "{{ url_for('static', filename = 'reccomendations/' + result.image)}}" class = 'img-fluid' alt = 'Result'>
                    </div>
                    <div class = "col-md-7">
                        <h3> {{ result.manufacturer }} {{ result.model }}</h3>
                        <p> <strong> Year: </strong> {{ result.year }} </p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endblock %}




    <!-- Javascript file imports-->
     <!-- Above this line is where unique code layout ends. Below are imports -->
    <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
     <script src = "{{ url_for('static', filename = 'main.js')}}"></script>
</body>
</html>